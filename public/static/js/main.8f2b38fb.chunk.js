(this["webpackJsonpws-eqworks-frontend"]=this["webpackJsonpws-eqworks-frontend"]||[]).push([[0],{144:function(e,t,a){},145:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),c=a.n(s),i=(a(144),a(145),a(301)),o=a(303),l=a(305),j=a(306),u=a(328),b=a.p+"static/media/logo-eq-works-white.9dfae69e.webp",d=a(15),m=a(59),h=a(2),p=Object(i.a)((function(e){return{root:{flexGrow:1},button:{margin:"1rem",color:"white"},buttonActive:{margin:"1rem",color:"white",borderBottom:"1px solid white"}}}));var O=function(){var e=p(),t=Object(d.f)();return Object(h.jsx)("div",{className:e.root,children:Object(h.jsx)(o.a,{position:"static",children:Object(h.jsxs)(l.a,{children:[Object(h.jsx)(u.a,{display:"flex",style:{height:"100%",flexGrow:"1"},alignItems:"center",children:Object(h.jsx)("img",{src:b,alt:"mockup",style:{height:"40px"}})}),Object(h.jsx)(j.a,{component:m.b,to:"/stats",className:"/stats"===t.pathname?e.buttonActive:e.button,children:"STATS"}),Object(h.jsx)(j.a,{component:m.b,to:"/events",className:"/events"===t.pathname?e.buttonActive:e.button,children:"EVENTS"}),Object(h.jsx)(j.a,{component:m.b,to:"/poi",className:"/poi"===t.pathname?e.buttonActive:e.button,children:"POI"})]})})})},x=a(37),f=a.n(x),g=a(53),v=a(7),y=a(308),S=a(309),w=a(311),C=a(36),k=a(81),D=a(17),I=a.n(D),M=a(307),N=a(259),A=a(267),E=a(263),T=a(330),P=a(125),B=Object(i.a)((function(e){return{root:Object(C.a)({padding:"1.5rem 1rem 1.5rem 1rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",margin:"1.5rem",boxShadow:"0 0 25px rgb(0 0 0 / 18%)",borderRadius:"10px",width:"500px"},e.breakpoints.down("l"),{width:"100%"}),chartContainer:{height:"18rem",width:"100%"},title:{fontSize:14}}}));var F=function(e){var t=e.rawData,a=e.xAxis,r=e.yAxis,s=e.title,c=e.stepSize,i=Object(n.useState)([]),o=Object(v.a)(i,2),l=o[0],j=o[1],u=Object(n.useState)("All"),b=Object(v.a)(u,2),d=b[0],m=b[1],p=Object(n.useState)([]),O=Object(v.a)(p,2),x=O[0],f=O[1],g=B(),w={legend:{display:!1},responsive:!0,maintainAspectRatio:!1,elements:{point:{radius:2}},tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,t){return"clicksPerImpressions"===r?I()(e.value).format("0.000%"):"revenuePerClick"===r?I()(e.value).format("0.0a"):I()(e.value).format("0,0")}}},scales:{xAxes:[{type:"time",time:{stepSize:c,displayFormats:{millisecond:"MMM DD",second:"MMM DD",minute:"MMM DD",hour:"MMM DD ",day:"MMM DD",week:"MMM DD",month:"MMM DD",quarter:"MMM DD",year:"MMM DD"},tooltipFormat:"ll"}}],yAxes:[{scaleLabel:{display:!0,labelString:s},ticks:{callback:function(e,t,a){return"clicksPerImpressions"===r?I()(e).format("0.000%"):"revenue"===r||"revenuePerClick"===r?I()(e).format("$0.0a"):I()(e).format("0.0a")}}}]}};return Object(n.useEffect)((function(){j(function(e,a,n,c){var i=[],o=1;if(e.forEach((function(s,l){var j={};if("All"===c||s.name===c){if("clicksPerImpressions"===r){var u=s.clicks/s.impressions;u=u.toFixed(5),j.y=parseFloat(u)}else if("revenuePerClick"===r){var b=s.revenue/s.clicks;j.y=parseFloat(b)}else j.y=parseFloat(s[n]);"All"===c?0===l||s[a].substring(0,10)!==t[l-1][a].substring(0,10)?(0===l||"clicksPerImpressions"!==r&&"revenuePerClick"!==r||(i[i.length-1].y/=o,o=1),j.x=s[a].substring(0,10),i.push(j)):(o++,i[i.length-1].y+=parseFloat(j.y),l!==e.length-1||"clicksPerImpressions"!==r&&"revenuePerClick"!==r||(i[i.length-1].y/=o)):(j.x=s[a].substring(0,10),i.push(j))}})),"Number Of Events"===s&&"All"!==d){var l=[];i.forEach((function(e,t){if(l.push(e),t!==i.length-1&&Object(P.a)(new Date(e.x),1).toString()!==new Date(i[t+1].x).toString()){var a={x:Object(P.a)(new Date(e.x),1),y:0};l.push(a)}})),i=l}return i}(t,a,r,d))}),[t,a,r,d,s]),Object(n.useEffect)((function(){f(function(e){var t=[];return e.forEach((function(e){t.includes(e.name)||t.push(e.name)})),t}(t))}),[t]),Object(h.jsxs)(M.a,{className:g.root,style:s.includes("Events")?{width:"70vw"}:{},children:[Object(h.jsxs)(y.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",children:[Object(h.jsx)(S.a,{variant:"h5",style:{paddingBottom:"1rem",fontWeight:"300"},children:s}),Object(h.jsxs)(N.a,{style:{margin:"0 1rem 1rem 1rem"},variant:"outlined",children:[Object(h.jsx)(A.a,{children:"POI"}),Object(h.jsxs)(E.a,{value:d,onChange:function(e){m(e.target.value)},label:"POI",children:[Object(h.jsx)(T.a,{value:"All",children:"All"},1),x&&x.map((function(e,t){return Object(h.jsx)(T.a,{value:e,children:e},t+2)}))]})]})]}),Object(h.jsx)("div",{className:g.chartContainer,children:Object(h.jsx)(k.Line,{options:w,data:function(e){var t=e.getContext("2d").createLinearGradient(0,0,0,360);return t.addColorStop(1,"rgba(34,193,195,0)"),t.addColorStop(0,"rgba(63,81,181,0.9308765742625175)"),{datasets:[{backgroundColor:t,borderColor:"#3F51B5",data:l}]}}})})]})},z=a(327),W=a(310),J=Object(i.a)((function(e){var t;return{root:(t={padding:"1rem 1.5rem 1rem 1.5rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",margin:"1.5rem",borderRadius:"10px",boxShadow:"0 0 25px rgb(0 0 0 / 18%)"},Object(C.a)(t,e.breakpoints.down("l"),{width:"100%"}),Object(C.a)(t,"width","80%"),t),chartContainer:{width:"100%",height:"50vh"},title:{fontSize:14},formControl:{margin:"1rem"}}}));var L=function(e){var t=e.rawData,a=e.title,r=e.initialChartType,s=e.showChartType,c=e.showOneDate,i=(e.showTwoDates,Object(n.useState)("")),o=Object(v.a)(i,2),l=o[0],j=o[1],u=Object(n.useState)([]),b=Object(v.a)(u,2),d=b[0],m=b[1],p=Object(n.useState)([]),O=Object(v.a)(p,2),x=O[0],f=O[1],g=Object(n.useState)("revenue"),w=Object(v.a)(g,2),C=w[0],D=w[1],P=Object(n.useState)([]),B=Object(v.a)(P,2),F=B[0],L=B[1],R=Object(n.useState)("All"),H=Object(v.a)(R,2),G=H[0],q=H[1],K=Object(n.useState)([]),Z=Object(v.a)(K,2),U=Z[0],$=Z[1],V=J();Object(n.useEffect)((function(){$(function(e){var t=[];return e.forEach((function(e){t.includes(e.name)||t.push(e.name)})),t}(t));for(var e=[],a=0;a<24;a++)e[a]=a;f(e),t[0]&&(j(t[0].date),L(_(t))),r&&D(r)}),[t,r]),Object(n.useEffect)((function(){m(function(e,t,n){for(var r=[],s=0;s<24;s++)r[s]=0;return e.forEach((function(e){(e.date===l||a.includes("Overall"))&&("All"!==n&&e.name!==n||(r[e.hour]+=parseFloat(e[t])))})),r}(t,C,G))}),[C,l,t,a,G]);var _=function(e){var t=[];return t[0]=e[0].date,e.forEach((function(e){t[t.length-1]!==e.date&&t.push(e.date)})),t},Q={responsive:!0,maintainAspectRatio:!1,legend:{display:!1},tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,t){return"revenue"===C?I()(e.value).format("$0,0"):I()(e.value).format("0a")},title:function(e,t){return"Hour: "+t.labels[e[0].index]}}},scales:{xAxes:[{gridLines:{display:!1},scaleLabel:{display:!0,labelString:"Hour"}}],yAxes:[{scaleLabel:{display:!0,labelString:C.toUpperCase()},gridLines:{display:!0},ticks:{callback:function(e,t,a){return"revenue"===C?I()(e).format("$0,0"):I()(e).format("0a")}}}]}};return Object(h.jsxs)(M.a,{className:V.root,children:[Object(h.jsxs)(y.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(h.jsx)(S.a,{variant:"h5",style:{margin:"1rem 0 1rem 1rem",paddingBottom:"1rem",fontWeight:"300",flexGrow:"1",textAlign:"left"},children:a}),Object(h.jsxs)(N.a,{className:V.formControl,variant:"outlined",children:[Object(h.jsx)(A.a,{id:"demo-simple-select-filled-label",children:"POI"}),Object(h.jsxs)(E.a,{value:G,onChange:function(e){q(e.target.value)},label:"POI",children:[Object(h.jsx)(T.a,{value:"All",children:"All"},1),U&&U.map((function(e,t){return Object(h.jsx)(T.a,{value:e,children:e},t+2)}))]})]}),s&&Object(h.jsxs)(N.a,{className:V.formControl,variant:"outlined",children:[Object(h.jsx)(A.a,{children:"Chart Type"}),Object(h.jsxs)(E.a,{value:C,onChange:function(e){D(e.target.value)},label:"Chart Type",children:[Object(h.jsx)(T.a,{value:"revenue",children:"Revenue"}),Object(h.jsx)(T.a,{value:"clicks",children:"Clicks"}),Object(h.jsx)(T.a,{value:"impressions",children:"Impressions"})]})]}),c&&Object(h.jsxs)(N.a,{className:V.formControl,variant:"outlined",children:[Object(h.jsx)(A.a,{children:"Date"}),Object(h.jsx)(E.a,{value:l,onChange:function(e){j(e.target.value)},label:"Date",children:F?F.map((function(e,t){return Object(h.jsxs)(T.a,{value:e,children:[" ",Object(z.a)(Object(W.a)(new Date(e),1),"dd MMM yyyy")," "]},t+1)})):Object(h.jsx)(T.a,{value:l,children:Object(z.a)(Object(W.a)(new Date(l),1),"dd MMM yyyy")},1)})]})]}),Object(h.jsxs)("div",{className:V.chartContainer,children:[" ",Object(h.jsx)(k.Bar,{options:Q,data:function(e){var t=e.getContext("2d").createLinearGradient(0,80,0,600);return t.addColorStop(1,"rgba(34,193,195,0)"),t.addColorStop(0,"rgba(63,81,181,0.9308765742625175)"),{labels:x,datasets:[{label:"Hour",backgroundColor:t,borderColor:"#3F51B5",data:d}]}}})]})]})};a(251);var R=function(){var e=Object(n.useState)([]),t=Object(v.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)([]),c=Object(v.a)(s,2),i=c[0],o=c[1],l=Object(n.useState)(!0),j=Object(v.a)(l,2),u=j[0],b=j[1];return Object(n.useEffect)((function(){(function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sessionStorage.getItem("hourlyStats")){e.next=5;break}r(JSON.parse(sessionStorage.getItem("hourlyStats"))),o(JSON.parse(sessionStorage.getItem("dailyStats"))),e.next=9;break;case 5:return e.next=7,fetch("https://eqworks-ws.herokuapp.com/api/stats/hourly").then((function(e){return e.json()})).then((function(e){r(e),sessionStorage.setItem("hourlyStats",JSON.stringify(e))}));case 7:return e.next=9,fetch("https://eqworks-ws.herokuapp.com/api/stats/daily").then((function(e){return e.json()})).then((function(e){o(e),sessionStorage.setItem("dailyStats",JSON.stringify(e))}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){b(!1)})).catch((function(e){console.log(e)}))}),[]),Object(h.jsxs)(y.a,{container:!0,justify:"center",alignItems:"center",direction:"column",className:"statsPage",children:[Object(h.jsx)(y.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:Object(h.jsx)(S.a,{variant:"h3",style:{fontWeight:"200",borderBottom:"2px solid rgb(80 138 221)",marginLeft:"3rem",paddingBottom:".5rem",marginBottom:"1rem",marginTop:"1rem"},children:"Daily Stats"})}),u?Object(h.jsx)(y.a,{container:!0,alignItems:"center",justify:"center",style:{height:"90vh"},children:Object(h.jsx)(w.a,{style:{marginBottom:"10rem"}})}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"graphContainer",children:[Object(h.jsx)(F,{rawData:i,xAxis:"date",yAxis:"revenue",title:"Revenue",stepSize:5}),Object(h.jsx)(F,{rawData:i,xAxis:"date",yAxis:"impressions",title:"Impressions",stepSize:5}),Object(h.jsx)(F,{rawData:i,xAxis:"date",yAxis:"clicks",title:"Clicks",stepSize:5}),Object(h.jsx)(F,{rawData:i,xAxis:"date",yAxis:"clicksPerImpressions",title:"Click Per Impression Percentage",stepSize:5}),Object(h.jsx)(F,{rawData:i,xAxis:"date",yAxis:"revenuePerClick",title:"Revenue Per Click",stepSize:5})]}),Object(h.jsx)(y.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:Object(h.jsx)(S.a,{variant:"h3",style:{fontWeight:"200",borderBottom:"2px solid rgb(80 138 221)",marginLeft:"3rem",paddingBottom:".5rem",marginBottom:"1rem",marginTop:"2.5rem"},children:"Hourly Stats"})}),Object(h.jsx)("div",{className:"graphContainer",children:Object(h.jsx)(L,{rawData:a,title:"Hourly Stats In Each Day",showChartType:!0,showOneDate:!0})}),Object(h.jsx)("div",{className:"graphContainer",children:Object(h.jsx)(L,{rawData:a,title:"Overall Hourly Stats",showChartType:!0})})]})]})};a(252);var H=function(){var e=Object(n.useState)([]),t=Object(v.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)([]),c=Object(v.a)(s,2),i=c[0],o=c[1],l=Object(n.useState)(!0),j=Object(v.a)(l,2),u=j[0],b=j[1];return Object(n.useEffect)((function(){(function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sessionStorage.getItem("hourlyEvents")){e.next=5;break}r(JSON.parse(sessionStorage.getItem("hourlyEvents"))),o(JSON.parse(sessionStorage.getItem("dailyEvents"))),e.next=9;break;case 5:return e.next=7,fetch("https://eqworks-ws.herokuapp.com/api/events/hourly").then((function(e){return e.json()})).then((function(e){r(e),sessionStorage.setItem("hourlyEvents",JSON.stringify(e))}));case 7:return e.next=9,fetch("https://eqworks-ws.herokuapp.com/api/events/daily").then((function(e){return e.json()})).then((function(e){o(e),sessionStorage.setItem("dailyEvents",JSON.stringify(e))}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){b(!1)})).catch((function(e){console.log(e)}))}),[]),Object(h.jsxs)(y.a,{container:!0,justify:"center",alignItems:"center",direction:"column",className:"EventsPage",children:[Object(h.jsx)(y.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:Object(h.jsx)(S.a,{variant:"h3",style:{fontWeight:"200",borderBottom:"2px solid rgb(80 138 221)",marginLeft:"3rem",paddingBottom:".5rem",marginBottom:"1rem",marginTop:"1rem"},children:"Daily Events"})}),u?Object(h.jsx)(y.a,{container:!0,alignItems:"center",justify:"center",style:{height:"90vh"},children:Object(h.jsx)(w.a,{style:{marginBottom:"10rem"}})}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"graphContainer",children:Object(h.jsx)(F,{rawData:i,xAxis:"date",yAxis:"events",title:"Number Of Events",stepSize:5})}),Object(h.jsx)(y.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:Object(h.jsx)(S.a,{variant:"h3",style:{fontWeight:"200",borderBottom:"2px solid rgb(80 138 221)",marginLeft:"3rem",paddingBottom:".5rem",marginBottom:"1rem",marginTop:"2.5rem"},children:"Hourly Events"})}),Object(h.jsx)("div",{className:"graphContainer",children:Object(h.jsx)(L,{rawData:a,title:"Hourly Events In Each Day",initialChartType:"events",showOneDate:!0})}),Object(h.jsx)("div",{className:"graphContainer",children:Object(h.jsx)(L,{rawData:a,title:"Overall Hourly Events",initialChartType:"events"})})]})]})},G=a(317),q=a(320),K=a(314),Z=a(316),U=a(318),$=a(315),V=a(262),_=a(319);var Q=function(e){var t=e.lat,a=e.lon,n=e.setMapCenter,r=e.setMapZoom;return Object(h.jsx)(j.a,{style:{width:"130px",height:"36px"},variant:"contained",color:"primary",onClick:function(){n({lat:t,lng:a}),r(13)},children:"Show On Map"})},Y=a(312),X=a(313);var ee=function(e){var t=e.titleToShow,a=e.title,n=e.setCompareKey,r=e.setSortDirection,s=e.isSelected,c=e.sortDirection;return Object(h.jsx)(j.a,{style:{minWidth:"0px",marginLeft:"-.5rem"},onClick:function(){n(a),r(s?"asc"===c?"desc":"asc":"desc")},endIcon:"asc"===c&&s?Object(h.jsx)(Y.a,{}):"desc"===c&&s?Object(h.jsx)(X.a,{}):"",children:t})},te=Object(i.a)((function(e){return{card:{display:"flex",flexGrow:"1",padding:"1.5rem",borderRadius:"10px 10px 0px 0px",boxShadow:"none",flexWrap:"wrap"},tableContainer:{width:"100%",maxWidth:"800px"},formControl:{margin:"1rem",minWidth:"132px"},form:{display:"flex",flexGrow:"1",margin:"1rem",minWidth:"150px"},pageGrid:Object(C.a)({margin:"1rem 0rem",maxWidth:"800px",boxShadow:"0 0 25px rgb(0 0 0 / 18%)",borderRadius:"10px"},e.breakpoints.down("sm"),{maxWidth:"90vw"})}}));var ae=function(e){var t=e.rawData,a=e.tableData,r=e.regenerateTableData,s=e.setTableData,c=e.poiNames,i=e.setMapCenter,o=e.setMapZoom,l=Object(n.useState)(""),j=Object(v.a)(l,2),u=j[0],b=j[1],d=Object(n.useState)(""),m=Object(v.a)(d,2),p=m[0],O=m[1],x=Object(n.useState)(""),f=Object(v.a)(x,2),g=f[0],S=f[1],w=Object(n.useState)([]),C=Object(v.a)(w,2),k=C[0],D=C[1],P=Object(n.useState)(!1),B=Object(v.a)(P,2),F=B[0],J=B[1],L=Object(n.useState)(!1),R=Object(v.a)(L,2),H=R[0],Y=R[1],X=Object(n.useState)("revenue"),ae=Object(v.a)(X,2),ne=ae[0],re=ae[1],se=Object(n.useState)("asc"),ce=Object(v.a)(se,2),ie=ce[0],oe=ce[1],le=te(),je=function(e){var t=[];for(var a in e)if("lat"!==a&&"lon"!==a){var n=Object(h.jsx)(K.a,{children:"revenue"===a?I()(e[a]).format("$0.0a"):"name"===a?e[a]:I()(e[a]).format("0,0")},a);t.push(n)}return t};return Object(n.useEffect)((function(){t[0]&&(O(t[0].date),S(t[t.length-1].date),D(function(e){var t=[];return t[0]=e[0].date,e.forEach((function(e){t[t.length-1]!==e.date&&t.push(e.date)})),t}(t)))}),[t]),Object(h.jsxs)(y.a,{container:!0,justify:"center",className:le.pageGrid,children:[Object(h.jsxs)(M.a,{className:le.card,children:[Object(h.jsx)("form",{noValidate:!0,autoComplete:"off",className:le.form,children:Object(h.jsx)($.a,{label:"Search POI Name",variant:"outlined",value:u,onChange:function(e){b(e.target.value.toLowerCase())}})}),Object(h.jsxs)(N.a,{className:le.formControl,variant:"outlined",error:F,children:[Object(h.jsx)(A.a,{id:"demo-simple-select-filled-label",children:"From"}),Object(h.jsx)(E.a,{value:p,onChange:function(e){e.target.value<g?(J(!1),O(e.target.value),s(r(t,e.target.value,g,c))):J(!0)},label:"From",children:k?k.map((function(e,t){return Object(h.jsxs)(T.a,{value:e,children:[" ",Object(z.a)(Object(W.a)(new Date(e),1),"dd MMM yyyy")," "]},t+1)})):Object(h.jsx)(T.a,{value:p,children:Object(z.a)(Object(W.a)(new Date(p),1),"dd MMM yyyy")},1)}),F&&Object(h.jsx)(V.a,{children:"First date should be before second date"})]}),Object(h.jsxs)(N.a,{className:le.formControl,variant:"outlined",error:H,children:[Object(h.jsx)(A.a,{id:"demo-simple-select-filled-label",children:"To"}),Object(h.jsx)(E.a,{value:g,onChange:function(e){e.target.value>p?(Y(!1),S(e.target.value),s(r(t,p,e.target.value,c))):Y(!0)},label:"To",children:k?k.map((function(e,t){return Object(h.jsxs)(T.a,{value:e,children:[" ",Object(z.a)(Object(W.a)(new Date(e),1),"dd MMM yyyy")," "]},t+1)})):Object(h.jsx)(T.a,{value:g,children:Object(z.a)(Object(W.a)(new Date(g),1),"dd MMM yyyy")},1)}),H&&Object(h.jsx)(V.a,{children:"Second date should be after first date"})]})]}),Object(h.jsx)(Z.a,{className:le.tableContainer,children:Object(h.jsxs)(G.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(h.jsx)(U.a,{children:Object(h.jsxs)(_.a,{children:[Object(h.jsx)(K.a,{align:"left",style:{minWidth:"5rem"},children:Object(h.jsx)(ee,{title:"name",titleToShow:"POI Name",setSortDirection:oe,setCompareKey:re,isSelected:"name"===ne,sortDirection:ie})},1),Object(h.jsx)(K.a,{align:"left",style:{minWidth:"5rem"},children:Object(h.jsx)(ee,{title:"revenue",titleToShow:"Revenue",setSortDirection:oe,setCompareKey:re,isSelected:"revenue"===ne,sortDirection:ie})},2),Object(h.jsx)(K.a,{align:"left",style:{minWidth:"5rem"},children:Object(h.jsx)(ee,{title:"impressions",titleToShow:"Impressions",setSortDirection:oe,setCompareKey:re,isSelected:"impressions"===ne,sortDirection:ie})},3),Object(h.jsx)(K.a,{align:"left",style:{minWidth:"5rem"},children:Object(h.jsx)(ee,{title:"clicks",titleToShow:"Clicks",setSortDirection:oe,setCompareKey:re,isSelected:"clicks"===ne,sortDirection:ie})},4),Object(h.jsx)(K.a,{align:"left",style:{minWidth:"5rem"},children:Object(h.jsx)(ee,{title:"events",titleToShow:"Events",setSortDirection:oe,setCompareKey:re,isSelected:"events"===ne,sortDirection:ie})},5),Object(h.jsxs)(K.a,{align:"left",style:{minWidth:"5rem"},children:[" ","Location"]},6)]})}),Object(h.jsx)(q.a,{children:a&&[].concat(a).sort((function(e,t){return function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asc";return e[a]<t[a]?"asc"===n?1:-1:e[a]>t[a]?"asc"===ie?-1:1:0}(e,t,ne,ie)})).map((function(e){if(!u||e.name.toLowerCase().includes(u))return Object(h.jsxs)(_.a,{children:[je(e).map((function(e){return e})),Object(h.jsx)(K.a,{children:Object(h.jsx)(Q,{lat:e.lat,lon:e.lon,setMapZoom:o,setMapCenter:i})},"location")]},e.name)}))})]})})]})},ne=a(321),re=a(322),se=a(323),ce=a(324),ie=a(325),oe=a(126),le=a.n(oe),je=(a(254),a(255),a(20)),ue=new(a.n(je).a.Icon)({iconUrl:"https://unpkg.com/leaflet@1.5.1/dist/images/marker-icon.png",iconSize:[25,41],iconAnchor:[10,41],popupAnchor:[2,-40]});function be(e){var t=e.center,a=e.zoom;return Object(ne.a)().setView(t,a),null}var de=function(e){var t=e.center,a=e.zoom,n=e.locations;return Object(h.jsx)("div",{className:"map",children:Object(h.jsxs)(re.a,{center:t,zoom:a,minZoom:2,children:[Object(h.jsx)(be,{center:t,zoom:a}),Object(h.jsx)(se.a,{url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1Ijoic21hcG8iLCJhIjoiY2trd3NraGJ5MGp1eDJ4bzRob2F4c3AyNiJ9._QbSCAyV2ilH2KPoBJ7uzA"}),Object(h.jsx)(le.a,{children:n.map((function(e,t){return Object(h.jsx)(ce.a,{icon:ue,position:[e.lat,e.lon],children:Object(h.jsx)(ie.a,{children:Object(h.jsxs)(y.a,{container:!0,direction:"column",children:[Object(h.jsx)(y.a,{children:Object(h.jsx)("strong",{children:e.name})}),Object(h.jsx)(y.a,{children:"Revenue: ".concat(I()(e.revenue).format("$0.0a"))}),Object(h.jsx)(y.a,{children:"Impressions: ".concat(I()(e.impressions).format("0.0a"))}),Object(h.jsx)(y.a,{children:"Clicks: ".concat(I()(e.clicks).format("0.0a"))}),Object(h.jsx)(y.a,{children:"Events: ".concat(I()(e.events).format("0a"))})]})})},t+1)}))})]})})},me=(a(256),Object(i.a)({card:{maxWidth:"30rem",padding:"1.5rem",margin:"1rem",boxShadow:"0 0 25px rgb(0 0 0 / 18%)",borderRadius:"10px"}}));var he=function(){var e=Object(n.useState)([]),t=Object(v.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)({lat:47.279229,lng:-99.492188}),c=Object(v.a)(s,2),i=c[0],o=c[1],l=Object(n.useState)(3),j=Object(v.a)(l,2),u=j[0],b=j[1],d=Object(n.useState)([]),m=Object(v.a)(d,2),p=m[0],O=m[1],x=Object(n.useState)([]),C=Object(v.a)(x,2),k=C[0],D=C[1],I=Object(n.useState)(!0),N=Object(v.a)(I,2),A=N[0],E=N[1],T=me(),P=function(e){var t=[];return e.forEach((function(e){t.includes(e.name)||t.push(e.name)})),t},B=function(e,t,a,n){var r=[];return n.forEach((function(e){var t={name:e,revenue:0,impressions:0,clicks:0,events:0};r.push(t)})),e.forEach((function(e){e.date>=t&&e.date<=a&&r.forEach((function(t){t.name===e.name&&(null!==e.events&&(t.events+=parseFloat(e.events)),t.revenue+=parseFloat(e.revenue),t.impressions+=parseFloat(e.impressions),t.clicks+=parseFloat(e.clicks),t.lat=e.lat,t.lon=e.lon)}))})),r};return Object(n.useEffect)((function(){(function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sessionStorage.getItem("poiData")){e.next=6;break}t=JSON.parse(sessionStorage.getItem("poiData")),r(t),O(P(t)),e.next=8;break;case 6:return e.next=8,fetch("https://eqworks-ws.herokuapp.com/api/poi").then((function(e){return e.json()})).then((function(e){r(e),O(P(e)),sessionStorage.setItem("poiData",JSON.stringify(e))}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){E(!1)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){if(a[0]){var e=B(a,a[0].date,a[a.length-1].date,p);D(e)}}),[a,p]),Object(h.jsxs)(y.a,{container:!0,justify:"center",alignItems:"center",direction:"column",className:"PoiPage",children:[Object(h.jsx)(y.a,{container:!0,item:!0,direction:"row",justify:"flex-start",alignItems:"center",style:{alignSelf:"flex-start"},children:Object(h.jsx)(S.a,{variant:"h3",style:{fontWeight:"200",borderBottom:"2px solid rgb(80 138 221)",marginLeft:"3rem",paddingBottom:".5rem",marginBottom:"1rem",marginTop:"1rem"},children:"POI Data"})}),Object(h.jsx)(y.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:A?Object(h.jsx)(y.a,{container:!0,alignItems:"center",justify:"center",style:{height:"90vh"},children:Object(h.jsx)(w.a,{style:{marginBottom:"10rem"}})}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(y.a,{item:!0,xs:12,children:Object(h.jsx)(ae,{rawData:a,tableData:k,className:T.card,regenerateTableData:B,setTableData:D,poiNames:p,setMapCenter:o,setMapZoom:b})}),Object(h.jsx)(y.a,{item:!0,xs:12,children:Object(h.jsx)(M.a,{className:"mapCard",children:Object(h.jsx)(de,{center:i,zoom:u,locations:k})})})]})})]})},pe=a(127),Oe=a(329),xe=a(326),fe=Object(pe.a)({typography:{fontFamily:['"Poppins"',"-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),button:{textTransform:"none"}}});fe=Object(Oe.a)(fe);var ge=function(){return Object(h.jsx)(xe.a,{theme:fe,children:Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(m.a,{children:[Object(h.jsx)(O,{className:"App__Header"}),Object(h.jsx)(d.b,{path:"/",exact:!0,children:Object(h.jsx)(d.a,{to:"/stats"})}),Object(h.jsx)(d.b,{path:"/poi",exact:!0,component:he}),Object(h.jsx)(d.b,{path:"/stats",exact:!0,component:R}),Object(h.jsx)(d.b,{path:"/events",exact:!0,component:H})]})})})};c.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(ge,{})}),document.getElementById("root"))}},[[257,1,2]]]);
//# sourceMappingURL=main.8f2b38fb.chunk.js.map